set working-directory := "../.."

# Run all tests (Python + Rust)
default: python rust
    @echo "âœ… Ran tests (Python + Rust)."

# Run Python tests
python:
    uv run pytest

# Run only Rust tests
rust:
    @echo "Building Rust extension for tests..."
    uv run maturin develop
    #!/usr/bin/env bash
    # Set the python interpreter for PYO3
    export PYO3_PYTHON=$(uv run which python)
    cargo test --no-default-features

# Internal benchmark runner
_bench:
    @echo "Building Rust extension for benchmarks..."
    uv run maturin develop
    #!/usr/bin/env bash
    # Set the python interpreter for PYO3
    export PYO3_PYTHON=$(uv run which python)
    cargo bench
